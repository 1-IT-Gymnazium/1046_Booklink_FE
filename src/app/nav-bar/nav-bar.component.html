<!-- Navigation bar container -->
<nav class="bg-white shadow">
    <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
        <div class="relative flex h-16 items-center justify-between">
        
            <!-- Left side: Logo and Navigation Links -->
            <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
                
                <!-- Logo and branding -->
                <a routerLink="/home" routerLinkActive="active" class="flex items-center"
                    style="font-size: 1.5rem; font-weight: 700; margin: 0; color: black; transition: color 0.2s ease;">
                    <h2 class="mr-1">Booklink</h2>
                    <img class="h-8 w-auto" src="favicon.ico" alt="Your Company">
                </a>

                <!-- Navigation links (only visible on medium+ screens) -->
                <div class="hidden sm:ml-6 sm:block">
                    <div class="flex space-x-4">
                        <!-- Home button for guests -->
                        <button routerLink="/home" *ngIf="!isLoggedIn()"
                            class="rounded-md px-3 py-2 text-sm font-medium text-black hover:bg-gray-200"
                            aria-current="page">Home</button>
                        
                        <!-- Dashboard and Database buttons for logged-in users -->
                        <button routerLink="/dashboard" *ngIf="isLoggedIn()"
                            class="rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 hover:text-black">Dashboard</button>
                        <button routerLink="/collections" *ngIf="isLoggedIn()"
                            class="rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 hover:text-black">Database</button>
                    </div>
                </div>
            </div>

            <!-- Right side: Auth buttons or user profile menu -->
            <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
                
                <!-- Login/Register buttons for guests -->
                <button routerLink="/login" *ngIf="!isLoggedIn()" routerLinkActive="active"
                    class="mr-4 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition">Login</button>
                <button routerLink="/register" *ngIf="!isLoggedIn()" routerLinkActive="active"
                    class="mr-4 px-4 py-2 text-sm font-medium text-white bg-[#61d49e] rounded-md hover:bg-[#50b884] transition">Register</button>

                <!-- Logged-in user dropdown -->
                <div class="relative ml-3" (clickOutside)="closeUserMenu()">
                    <div>
                        <!-- Avatar and email shown when user is logged in -->
                        <button *ngIf="isLoggedIn()" type="button" (click)="toggleUserMenu()"
                            class="relative flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1 text-sm focus:ring-2 focus:ring-gray-300 focus:outline-none"
                            id="user-menu-button">
                            <img class="size-8 rounded-full"
                                src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y"
                                alt="Anonymous User" />
                            <span class="ml-2 font-medium text-gray-900">{{ userEmail || 'Anonymous User' }}</span>
                        </button>
                    </div>

                    <!-- Dropdown menu shown when avatar is clicked -->
                    <div *ngIf="showUserMenu"
                        class="absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 ring-1 shadow-lg ring-black/5 focus:outline-none">
                        <button routerLink="/profile" (click)="closeUserMenu()" routerLinkActive="active"
                                class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            View Profile
                        </button>
                        <button (click)="logout()" (click)="closeUserMenu()"
                                class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            Sign out
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>
